import{d as P,S as A,i as R,U as V,r as y,V as D,f as E,j as v,_ as q,g,o as l,c,h as s,q as t,F as x,s as B,m as L,t as b,l as N,k as F,C as H,W as M,D as j,X as K,O,b as U,A as J,E as Q,Y as W,Z as X,$ as Y,H as Z,I as G,R as k,z as w,J as $,a0 as ee,w as te,a1 as ae}from"./index_prod-00ee5e98.js";import"https://unpkg.com/@waline/client@v2/dist/waline.mjs";import{B as oe}from"./Breadcrumbs-fb88a08c.js";const se=P({name:"ObArticleBox",components:{SubTitle:A},props:{sidebarBox:{type:Boolean,default:!0},activeCategory:{type:String,default:""}},setup(e){const h=R(),u=V(),m=y(!0),_=D(),n=async()=>{await u.fetchCategories(),m.value=!1},a=o=>{_.push({name:"post-search",query:{category:o}})};return E(n),{loading:m,navigateToCategory:a,sidebarBoxClasses:v(()=>({"sidebar-box":e.sidebarBox})),categories:v(()=>u.categories),gradientBackground:o=>o?{background:h.themeConfig.theme.header_gradient_css,color:"#fff",opacity:1}:{}}}}),ne={class:"flex justify-event flex-wrap gap-2 pt-2 cursor-pointer"},re=["onClick"],le={class:"bg-ob-deep-900 text-ob text-center px-2 py-1 rounded-tr-md rounded-br-md text-sm opacity-70"};function ie(e,h,u,m,_,n){const a=g("SubTitle"),o=g("ob-skeleton");return l(),c("div",{class:F(e.sidebarBoxClasses)},[s(a,{title:"titles.category_list",icon:"category"},null,8,["title"]),t("ul",ne,[e.categories.length>0?(l(!0),c(x,{key:0},B(e.categories,i=>(l(),c("li",{class:"flex flex-row items-center hover:opacity-50",key:i.slug,onClick:T=>e.navigateToCategory(i.slug)},[t("span",{class:"bg-ob-deep-900 text-center px-3 py-1 rounded-tl-md rounded-bl-md text-sm",style:L(e.gradientBackground(i.slug===e.activeCategory))},b(i.name),5),t("b",le,b(i.count),1)],8,re))),128)):(l(),N(o,{key:1,tag:"li",count:10,height:"20px",width:"3rem"}))])],2)}const ce=q(se,[["render",ie]]),ge=P({name:"Result",components:{Breadcrumbs:oe,Sidebar:H,TagBox:M,Paginator:j,Article:K,CategoryBox:ce,SvgIcon:O},setup(){const{t:e}=U(),h=J(),u=Q(),m=W(),_=y("search"),n=y(!1),a=y(new X),o=y({pageSize:12,pageTotal:0,page:1}),i="aurora-query-tag",T="aurora-query-category",d=y(),p=y(),f=()=>{d.value?z():p.value&&I(),window.scrollTo({top:0}),m.setTitle("search")},z=()=>{n.value=!1,u.fetchPostsByTag(d.value).then(r=>{n.value=!0,a.value=r,o.value.pageTotal=r.total})},I=()=>{n.value=!1,u.fetchPostsByCategory(p.value).then(r=>{n.value=!0,a.value=r,o.value.pageTotal=r.total})},S=()=>{p.value="",d.value="";const{tag:r,category:C}=h.query;C?p.value=C:r&&(d.value=r),(r||C)&&f()};return Y(()=>h.query,r=>{S()}),Z(()=>{S()}),G(()=>{localStorage.removeItem(i),localStorage.removeItem(T)}),{isLoading:v(()=>!n.value),isEmpty:v(()=>a.value.data.length===0&&n.value),categoryTitle:v(()=>p.value),tagTitle:v(()=>d.value),posts:a,pageType:_,pagination:o,pageChangeHandler:S,t:e}}}),ue={class:"flex flex-col mt-10"},de={class:"post-header"},pe={class:"flex flex-row gap-8"},ye={key:0,class:"post-title text-white uppercase"},he={class:"opacity-60"},me={key:1,class:"post-title text-white uppercase"},fe={class:"opacity-60"},ve={class:"main-grid"},_e={class:"relative"},be={class:"post-html flex flex-col items-center"},Te={class:"flex flex-col relative"},Se={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8"},Ce={class:"sidebar-box flex flex-col gap-8"};function xe(e,h,u,m,_,n){const a=g("SvgIcon"),o=g("Article"),i=g("Paginator"),T=g("CategoryBox"),d=g("TagBox"),p=g("Sidebar");return l(),c("div",ue,[t("div",de,[t("div",pe,[e.categoryTitle?(l(),c("h1",ye,[t("span",he,[s(a,{"icon-class":"category",stroke:"white"})]),k(" "+b(e.categoryTitle),1)])):w("",!0),e.tagTitle?(l(),c("h1",me,[t("span",fe,[s(a,{"icon-class":"tag",stroke:"white"})]),k(" "+b(e.tagTitle),1)])):w("",!0)])]),t("div",ve,[t("div",_e,[s(ee,{name:"fade-slide-y",mode:"out-in"},{default:$(()=>[te(t("div",be,[t("h1",null,b(e.t("settings.no-search-result")),1),s(a,{"icon-class":"empty-search",style:{"font-size":"35rem"}})],512),[[ae,e.isEmpty]])]),_:1}),t("div",Te,[t("ul",Se,[e.isLoading||e.posts.data.length===0?(l(),c(x,{key:0},B(12,f=>t("li",{key:f},[s(o,{data:{}})])),64)):(l(!0),c(x,{key:1},B(e.posts.data,f=>(l(),c("li",{key:f.slug},[s(o,{data:f},null,8,["data"])]))),128))]),s(i,{pageSize:e.pagination.pageSize,pageTotal:e.pagination.pageTotal,page:e.pagination.page,onPageChange:e.pageChangeHandler},null,8,["pageSize","pageTotal","page","onPageChange"])])]),t("div",null,[s(p,null,{default:$(()=>[t("div",Ce,[s(T,{"sidebar-box":!1,"active-category":e.categoryTitle},null,8,["active-category"]),s(d,{"sidebar-box":!1,"active-tag":e.tagTitle},null,8,["active-tag"])])]),_:1})])])])}const $e=q(ge,[["render",xe]]);export{$e as default};
